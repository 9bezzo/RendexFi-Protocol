<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>RendexFi • Beta Access</title>
  <meta name="theme-color" content="#070b18">
  <meta name="color-scheme" content="dark">
  <link rel="icon" href="./rendex_logo.PNG" type="image/png">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="./style.css"/>
</head>
<body>
  <main class="container">
    <img src="./rendex_logo.PNG" alt="RendexFi Logo" class="logo" width="128" height="128">

    <h1>Rendex<span class="fi">Fi</span> <span class="beta">Beta</span></h1>
    <p class="subtitle">
      Trag deine E-Mail ein und erfahre als Erste*r, wenn die Beta live geht.  
      Double-Opt-in – jederzeit abmeldbar.
    </p>

    <div class="socials">
      <a href="https://instagram.com/rendexfi" target="_blank" rel="noopener" aria-label="Instagram @rendexfi">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 7.5zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5zM18.5 6a1.1 1.1 0 1 1-1.1 1.1A1.1 1.1 0 0 1 18.5 6z"/></svg>
      </a>
      <a href="https://twitter.com/rendexfi" target="_blank" rel="noopener" aria-label="X (Twitter) @rendexfi">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 3h5.2l4.4 6.3L17.5 3H21l-7.7 10.5L21.5 21h-5.2l-4.8-6.8L6.5 21H3l7.9-10.6L3 3z"/></svg>
      </a>
      <a href="https://discord.gg/yMb4DvXAvA" target="_blank" rel="noopener" aria-label="Discord">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20.3 4.4A18 18 0 0 0 15.9 3l-.2.4c2 .6 3 1.3 4 2.2-1.6-.8-3.1-1.3-4.6-1.6a16 16 0 0 0-6.2 0C7.4 4 6 4.5 4.4 5.6c1-.9 2.1-1.6 4-2.2L8.3 3A18 18 0 0 0 3.9 4.4C1.3 8 .5 11.4.8 14.9c1.7 1.2 3.4 2 5.2 2.5l1.1-1.8c-.6-.2-1.3-.5-2-.9l.5-.3c3.8 1.8 7.9 1.8 11.7 0l.5.3c-.7.4-1.4.7-2 .9l1.1 1.8c1.8-.5 3.5-1.3 5.2-2.5.4-3.5-.5-6.9-2.8-10.5zM8.9 12.7c-.8 0-1.5-.8-1.5-1.7 0-.9.7-1.7 1.5-1.7s1.5.8 1.5 1.7-.7 1.7-1.5 1.7zm6.2 0c-.8 0-1.5-.8-1.5-1.7 0-.9.7-1.7 1.5-1.7s1.5.8 1.5 1.7-.7 1.7-1.5 1.7z"/></svg>
      </a>
    </div>

    <form id="betaForm" novalidate>
      <label for="email">E-Mail</label>
      <input id="email" name="email" type="email" placeholder="deine@gmail.com" required />

      <label class="consent">
        <input type="checkbox" id="consent" required>
        <span>Ich willige ein, dass RendexFi meine E-Mail zum Versand von Beta-Updates verarbeitet.  
          Infos in der <a href="/datenschutz.html" target="_blank">Datenschutzerklärung</a>.</span>
      </label>

      <button type="submit" id="submitBtn">Zugriff sichern</button>
      <div id="status" class="status" role="status" aria-live="polite"></div>
    </form>

    <div class="footer">
      © 2025 RendexFi Protocol · <a href="/impressum.html">Impressum</a> · <a href="/datenschutz.html">Datenschutz</a>
    </div>
  </main>

  <script>
    const form=document.getElementById('betaForm');
    const email=document.getElementById('email');
    const consent=document.getElementById('consent');
    const statusEl=document.getElementById('status');
    const btn=document.getElementById('submitBtn');
    const showStatus=(msg,type)=>{statusEl.textContent=msg;statusEl.className='status '+(type||'');};
    form.addEventListener('submit',async e=>{
      e.preventDefault();showStatus('');
      if(!email.validity.valid)return showStatus('Bitte gültige E-Mail eingeben.','error');
      if(!consent.checked)return showStatus('Bitte Zustimmung erteilen.','error');
      btn.disabled=true;btn.textContent='Sende...';
      try{
        const r=await fetch('./api/subscribe', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ email: email.value })
        });
        if(!r.ok)throw new Error();
        showStatus('Fast geschafft! Bitte E-Mail bestätigen.','success');form.reset();
      }catch{showStatus('Fehler – bitte später erneut versuchen.','error');}
      finally{btn.disabled=false;btn.textContent='Zugriff sichern';}
    });
  </script>
</body>
</html>
